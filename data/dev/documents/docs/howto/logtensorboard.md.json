{"attributes":{"backlinks":[{"tag":"document","title":"toc","docid":"documents/toc.md"}],"path":"/home/runner/.julia/packages/FastAI/XKTTQ/docs/howto/logtensorboard.md","title":"How to log to TensorBoard"},"tag":"document","children":[{"attributes":{},"tag":"h1","children":[{"mimes":{"text/plain":"How to log to TensorBoard"}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"TensorBoard is a format and viewer for logs of model training and can be used to inspect and compare the results of training runs"}},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":" We can log step and epoch metrics, hyperparameters and even visualizations to TensorBoard using FluxTraining"}},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":"jl"}},{"mimes":{"text/plain":"â€™"}},{"mimes":{"text/plain":"s logging callbacks"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"h2","children":[{"mimes":{"text/plain":"Generating logs"}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"To use logging callbacks, we need to pass a log backend, here "}},{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.TensorBoardBackend"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"TensorBoardBackend"}}]}]},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":" This design allows flexibly supporting other logging backends like Weights and Biases or neptune"}},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":"ai in the future"}},{"mimes":{"text/plain":"."}}]},{"attributes":{"class":"cellcontainer","cell":"main","lang":"julia"},"tag":"div","children":[{"attributes":{"class":"codecell","cell":"main","lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_using","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_KEYWORD","children":[{"mimes":{"text/plain":"using"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI"},"tag":"reference","children":[{"mimes":{"text/plain":"FastAI"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":"\n\n"}}]}]}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.Data.FashionMNIST.dir"},"tag":"reference","children":[{"mimes":{"text/plain":"dir"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"mktempdir"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")\n"}}]}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"backend"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.TensorBoardBackend"},"tag":"reference","children":[{"mimes":{"text/plain":"TensorBoardBackend"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.Data.FashionMNIST.dir"},"tag":"reference","children":[{"mimes":{"text/plain":"dir"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]}]}]}]},{"mimes":{"text/plain":""}},{"attributes":{"class":"coderesult"},"tag":"pre","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"TensorBoardBackend(/tmp/jl_cdCvrW)"}}]}]}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"Then we create callbacks for logging metrics and hyperparameters to that backend:"}}]},{"attributes":{"class":"cellcontainer","cell":"main","lang":"julia"},"tag":"div","children":[{"attributes":{"class":"codecell","cell":"main","lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"metricscb"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.LogMetrics"},"tag":"reference","children":[{"mimes":{"text/plain":"LogMetrics"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"backend"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")\n"}}]}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"hparamscb"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.LogHyperParams"},"tag":"reference","children":[{"mimes":{"text/plain":"LogHyperParams"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"backend"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]}]}]}]},{"mimes":{"text/plain":""}},{"attributes":{"class":"coderesult"},"tag":"pre","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"LogHyperParams((TensorBoardBackend(/tmp/jl_cdCvrW),))"}}]}]}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"Like any other callbacks, these can then be passed to a "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"Learner"}}]},{"mimes":{"text/plain":" along with other callbacks and we can start training"}},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":" By using the "}},{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.Metrics"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"Metrics"}}]}]},{"mimes":{"text/plain":" callback we can log metrics other than the loss"}},{"mimes":{"text/plain":"."}}]},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"callbacks"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_vect","children":[{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"[\n    "}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"metricscb"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n    "}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"hparamscb"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n    "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.ToGPU"},"tag":"reference","children":[{"mimes":{"text/plain":"ToGPU"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n    "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.Metrics"},"tag":"reference","children":[{"mimes":{"text/plain":"Metrics"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{"reftype":"symbol","document_id":"references/FluxTraining.accuracy"},"tag":"reference","children":[{"mimes":{"text/plain":"accuracy"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")\n"}}]}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"]\n\n"}}]}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"data"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"...\n"}}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"task"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"...\n"}}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"learner"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.tasklearner"},"tag":"reference","children":[{"mimes":{"text/plain":"tasklearner"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"task"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"data;"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_parameters","children":[{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"callbacks"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"="}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"callbacks"}}]}]}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")\n"}}]}]}]}]},{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.fitonecycle!"},"tag":"reference","children":[{"mimes":{"text/plain":"fitonecycle!"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"learner"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"5"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]}]}]},{"attributes":{},"tag":"h2","children":[{"mimes":{"text/plain":"Inspecting logs"}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"To inspect the logs you will have to install the "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"tensorboard"}}]},{"mimes":{"text/plain":" command"}},{"mimes":{"text/plain":"-"}},{"mimes":{"text/plain":"line using "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"pip"}}]},{"mimes":{"text/plain":" (you can access the command"}},{"mimes":{"text/plain":"-"}},{"mimes":{"text/plain":"line in the Julia REPL by pressing "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":";"}}]},{"mimes":{"text/plain":")"}},{"mimes":{"text/plain":"."}}]},{"attributes":{"lang":""},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_call","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"shell"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"> "}}]},{"attributes":{},"tag":"CST_errortoken","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"pip"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_errortoken","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"install"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"tensorboard"}}]}]}]}]}]}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"After this one"}},{"mimes":{"text/plain":"-"}},{"mimes":{"text/plain":"time installation, you can run it by pointing it to the log directory created above:"}}]},{"attributes":{"lang":""},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_call","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"shell"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"> "}}]},{"attributes":{},"tag":"CST_errortoken","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"tensorboard"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_errortoken","children":[{"attributes":{},"tag":"CST_errortoken","children":[{"attributes":{},"tag":"CST_errortoken","children":[{"mimes":{"text/plain":"--"}}]}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"logdir"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"$"}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.Data.FashionMNIST.dir"},"tag":"reference","children":[{"mimes":{"text/plain":"dir"}}]}]}]}]}]}]}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"This should give you an URL that you can open in a browser which should look like this:"}}]},{"attributes":{},"tag":"p","children":[{"attributes":{"src":"../../assets/tensorboardscreenshot.png","alt":""},"tag":"img","children":[]}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"Note that you can also open TensorBoard and it will update as the training progresses"}},{"mimes":{"text/plain":"."}}]}]}