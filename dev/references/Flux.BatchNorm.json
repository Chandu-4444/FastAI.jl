{"attributes":{"kind":"struct","backlinks":[{"tag":"sourcefile","title":"Flux/src/cuda/cudnn.jl","docid":"sourcefiles/Flux/src/cuda/cudnn.jl"},{"tag":"sourcefile","title":"Flux/src/deprecations.jl","docid":"sourcefiles/Flux/src/deprecations.jl"},{"tag":"sourcefile","title":"Flux/src/layers/show.jl","docid":"sourcefiles/Flux/src/layers/show.jl"},{"tag":"sourcefile","title":"FastAI/src/Tabular/Tabular.jl","docid":"sourcefiles/FastAI/src/Tabular/Tabular.jl"},{"tag":"documentation","title":"modules","docid":"references/Flux.modules"},{"tag":"sourcefile","title":"FastAI/src/Vision/models/unet.jl","docid":"sourcefiles/FastAI/src/Vision/models/unet.jl"},{"tag":"sourcefile","title":"Flux/src/Flux.jl","docid":"sourcefiles/Flux/src/Flux.jl"},{"tag":"sourcefile","title":"FastAI/src/Vision/models/xresnet.jl","docid":"sourcefiles/FastAI/src/Vision/models/xresnet.jl"},{"tag":"sourcefile","title":"Flux/src/outputsize.jl","docid":"sourcefiles/Flux/src/outputsize.jl"},{"tag":"document","title":"Custom learning tasks","docid":"documents/docs/learning_methods.md"},{"tag":"sourcefile","title":"Flux/src/layers/normalise.jl","docid":"sourcefiles/Flux/src/layers/normalise.jl"},{"tag":"documentation","title":"params","docid":"references/Flux.params"},{"tag":"sourcefile","title":"FastAI/src/Vision/models/blocks.jl","docid":"sourcefiles/FastAI/src/Vision/models/blocks.jl"},{"tag":"sourcefile","title":"FastAI/src/Tabular/models.jl","docid":"sourcefiles/FastAI/src/Tabular/models.jl"}],"methods":[{"line":250,"file":"/home/runner/.julia/packages/Flux/qAdFM/src/layers/normalise.jl","method_id":"Flux.BatchNorm_1","symbol_id":"Flux.BatchNorm","signature":"BatchNorm(chs::Int64)"},{"line":237,"file":"/home/runner/.julia/packages/Flux/qAdFM/src/layers/normalise.jl","method_id":"Flux.BatchNorm_2","symbol_id":"Flux.BatchNorm","signature":"BatchNorm(λ::F, β::V, γ::V, μ::W, σ²::W, ϵ::N, momentum::N, affine::Bool, track_stats::Bool, active::Union{Nothing, Bool}, chs::Int64)"},{"line":250,"file":"/home/runner/.julia/packages/Flux/qAdFM/src/layers/normalise.jl","method_id":"Flux.BatchNorm_3","symbol_id":"Flux.BatchNorm","signature":"BatchNorm(chs::Int64, λ; initβ, initγ, affine, track_stats, ϵ, momentum)"},{"line":70,"file":"/opt/hostedtoolcache/julia/1.7.2/x64/share/julia/base/deprecated.jl","method_id":"Flux.BatchNorm_4","symbol_id":"Flux.BatchNorm","signature":"BatchNorm(λ, β, γ, μ, σ², ϵ, momentum)"},{"line":70,"file":"/opt/hostedtoolcache/julia/1.7.2/x64/share/julia/base/deprecated.jl","method_id":"Flux.BatchNorm_5","symbol_id":"Flux.BatchNorm","signature":"BatchNorm(λ, β, γ, μ, σ², ϵ, momentum, active)"}],"name":"BatchNorm","title":"BatchNorm","symbol_id":"Flux.BatchNorm","public":true,"module_id":"Flux"},"tag":"documentation","children":[{"attributes":{},"tag":"body","children":[{"attributes":{"lang":""},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.BatchNorm"},"tag":"reference","children":[{"mimes":{"text/plain":"BatchNorm"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"channels"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"::"}}]},{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"Integer"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"λ"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"="}}]},{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"identity;"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":"\n          "}}]}]}]},{"attributes":{},"tag":"CST_parameters","children":[{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"initβ"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"="}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.zeros32"},"tag":"reference","children":[{"mimes":{"text/plain":"zeros32"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"initγ"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"="}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.ones32"},"tag":"reference","children":[{"mimes":{"text/plain":"ones32"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n          "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"affine"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_TRUE","children":[{"mimes":{"text/plain":"true"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"track_stats"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_TRUE","children":[{"mimes":{"text/plain":"true"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n          "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"ϵ"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"="}}]},{"attributes":{},"tag":"CST_FLOAT","children":[{"mimes":{"text/plain":"1f-5"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_kw","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"momentum"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_FLOAT","children":[{"mimes":{"text/plain":"0.1f0"}}]}]}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]}]}]},{"attributes":{},"tag":"p","children":[{"attributes":{"href":"https://arxiv.org/abs/1502.03167","title":""},"tag":"a","children":[{"mimes":{"text/plain":"Batch Normalization"}}]},{"mimes":{"text/plain":" layer"}},{"mimes":{"text/plain":"."}},{"attributes":{},"tag":"br","children":[]},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"channels"}}]},{"mimes":{"text/plain":" should be the size of the channel dimension in your data (see below)"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"Given an array with "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"N"}}]},{"mimes":{"text/plain":" dimensions, call the "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"N-1"}}]},{"mimes":{"text/plain":"th the channel dimension"}},{"mimes":{"text/plain":"."}},{"mimes":{"text/plain":" For"}},{"attributes":{},"tag":"br","children":[]},{"mimes":{"text/plain":"a batch of feature vectors this is just the data dimension, for "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"WHCN"}}]},{"mimes":{"text/plain":" images"}},{"attributes":{},"tag":"br","children":[]},{"mimes":{"text/plain":"it"}},{"mimes":{"text/plain":"’"}},{"mimes":{"text/plain":"s the usual channel dimension"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"BatchNorm"}}]},{"mimes":{"text/plain":" computes the mean and variance for each "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"D_1×...×D_{N-2}×1×D_N"}}]},{"mimes":{"text/plain":""}},{"attributes":{},"tag":"br","children":[]},{"mimes":{"text/plain":"input slice and normalises the input accordingly"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"If "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"affine=true"}}]},{"mimes":{"text/plain":", it also applies  a shift and a rescale to the input"}},{"attributes":{},"tag":"br","children":[]},{"mimes":{"text/plain":"through to learnable per"}},{"mimes":{"text/plain":"-"}},{"mimes":{"text/plain":"channel bias β and scale γ parameters"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"After normalisation, elementwise activation "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"λ"}}]},{"mimes":{"text/plain":" is applied"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"If "}},{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"track_stats=true"}}]},{"mimes":{"text/plain":", accumulates mean and var statistics in training phase"}},{"attributes":{},"tag":"br","children":[]},{"mimes":{"text/plain":"that will be used to renormalize the input in test phase"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"p","children":[{"mimes":{"text/plain":"Use "}},{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":[{"mimes":{"text/plain":"testmode!"}}]}]},{"mimes":{"text/plain":" during inference"}},{"mimes":{"text/plain":"."}}]},{"attributes":{},"tag":"h1","children":[{"mimes":{"text/plain":"Examples"}}]},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"CST_DEFINITION","children":[{"attributes":{},"tag":"CST_OPERATOR","children":[{"attributes":{},"tag":"CST_span","children":[{"attributes":{},"tag":"CST_IDENTIFIER","children":[{"mimes":{"text/plain":"m"}}]},{"attributes":{},"tag":"CST_whitespace","children":[{"mimes":{"text/plain":" "}}]}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"= "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.Chain"},"tag":"reference","children":[{"mimes":{"text/plain":"Chain"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"(\n  "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.Dense"},"tag":"reference","children":[{"mimes":{"text/plain":"Dense"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"28"}}]},{"attributes":{},"tag":"CST_OPERATOR","children":[{"mimes":{"text/plain":"^"}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"2"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"64"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n  "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.BatchNorm"},"tag":"reference","children":[{"mimes":{"text/plain":"BatchNorm"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"64"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.relu"},"tag":"reference","children":[{"mimes":{"text/plain":"relu"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n  "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.Dense"},"tag":"reference","children":[{"mimes":{"text/plain":"Dense"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"64"}}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":", "}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"10"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n  "}}]},{"attributes":{},"tag":"CST_call","children":[{"attributes":{"reftype":"symbol","document_id":"references/Flux.BatchNorm"},"tag":"reference","children":[{"mimes":{"text/plain":"BatchNorm"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":"("}}]},{"attributes":{},"tag":"CST_INTEGER","children":[{"mimes":{"text/plain":"10"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]},{"attributes":{},"tag":"CST_PUNCTUATION","children":[{"mimes":{"text/plain":",\n  "}}]},{"attributes":{"reftype":"symbol","document_id":"references/Flux.softmax"},"tag":"reference","children":[{"mimes":{"text/plain":"softmax"}}]},{"attributes":{},"tag":"CST_BRACKET","children":[{"mimes":{"text/plain":")"}}]}]}]}]}]}]}]}